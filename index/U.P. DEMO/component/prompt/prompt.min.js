import Vue from"vue";import prompt from"./prompt.vue";const PopupBox=Vue.extend(prompt);let instance,ins=0,popArr=[];prompt.msg=function(txt,opts){const PT=0;let setting=craft.settingEngine(txt,opts,0);Vue.nextTick(()=>{"object"==typeof opts?instance.showMsg(setting.text,opts,ins,0):instance.showMsg(setting.text,{},ins,0),craft.autoEngine(setting.time)})},prompt.error=function(txt,opts){prompt.status(txt,opts,0)},prompt.success=function(txt,opts){prompt.status(txt,opts,1)},prompt.info=function(txt,opts){prompt.status(txt,opts,2)},prompt.question=function(txt,opts){prompt.status(txt,opts,3)},prompt.status=function(txt,opts,status){const PT=1;let setting=craft.settingEngine(txt,opts,1);return Vue.nextTick(()=>{"object"==typeof opts?instance.showStatus(status,setting.text,opts,ins,1):instance.showStatus(status,setting.text,{},ins,1),craft.autoEngine(setting.time)}),ins},prompt.load=function(txt,opts){const PT=2;let setting=craft.settingEngine(txt,opts,2);return Vue.nextTick(()=>{"object"==typeof opts?instance.showLoad(setting.text,opts,ins,2):instance.showLoad(setting.text,{},ins,2),craft.autoEngine(setting.time)}),ins},prompt.modal=function(view,opts){const PT=3;return craft.settingEngine(void 0,void 0,3),opts.lineColor||(opts.lineColor="#ccc"),opts.vtStyle||(opts.vtStyle={}),opts.vdStyle||(opts.vdStyle={}),opts.vtStyle.fontSize||(opts.vtStyle.fontSize="34rpx"),opts.vtStyle.fontWeight||(opts.vtStyle.fontWeight="bold"),opts.btn&&0!==opts.btn.length||(opts.btn=[{key:"确定"}]),opts.btn.forEach((item,index)=>{item.key||(item.key="未定义"),item.fn||(item.fn=void 0),item.time||(item.time=0),item.style||(opts.btn.length<2?item.style={color:"#4E90F6"}:2===opts.btn.length?item.style=0===index?{color:"#ED0009"}:{color:"#4E90F6"}:item.style={}),item.style.fontWeight||(item.style.fontWeight="bold"),item.style.borderLeft||(item.style.borderLeft="1rpx solid"+opts.lineColor)}),Vue.nextTick(()=>{"object"==typeof opts?instance.showModal(view,opts,ins,3):instance.showModal(view,{},ins,3),craft.autoEngine(0)}),ins},prompt.hide=function(insId){if(!instance)return!1;Vue.nextTick(()=>{if(0===popArr.length)return!1;if(!insId&&"number"!=typeof insId||"object"==typeof insId){let del=popArr.pop();instance.hide(del)}else popArr.forEach((element,index)=>{element.insID===insId&&(popArr.splice(index,1),instance.hide(element))})})},prompt.hideType=function(type){if(!instance)return!1;popArr.forEach((element,index)=>{element.type===type&&(popArr.splice(index,1),instance.hide(element))})},prompt.hideAll=function(){if(!instance)return!1;Vue.nextTick(()=>{popArr=[],instance.hideAll()})},prompt.getList=function(){return popArr};let craft={settingEngine:function(txt,opts,type){return instance||(instance=(new PopupBox).$mount(),document.body.appendChild(instance.$el)),prompt.hideType(type),"string"!=typeof txt&&(txt=JSON.stringify(txt)),popArr.push({type:type,insID:ins}),void 0!==opts?"number"==typeof opts?{text:txt,time:opts}:void 0!==opts.time&&"number"==typeof opts.time?{text:txt,time:opts.time}:{text:txt,time:3e3}:{text:txt,time:3e3}},autoEngine:function(time){let insID=ins;0!=time?setTimeout(()=>{prompt.hide(insID),ins++},time):ins++},ArrDebug:function(arr){arr.forEach(item=>{console.log(item)})}};export default prompt;